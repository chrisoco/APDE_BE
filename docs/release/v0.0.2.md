# Release v0.0.2

## Major Refactor: Campaign & Landingpage Association

**Release Date:** August 18, 2025

### Highlights
- **Campaign > Landingpage Association Refactor:**
  - The association between campaigns and landing pages has been restructured. Campaigns now reference landing pages via `landingpage_id`.
  - The relationship is now: `Campaign` belongs to `Landingpage`, and `Landingpage` has many `Campaigns`.
  - This allows multiple campaigns to share the same landing page content while maintaining separate tracking and configuration.
- **Slug Moved to Campaign:**
  - The `slug` field has been moved from the `Landingpage` model to the `Campaign` model.
  - All public and internal endpoints that previously used the landing page slug now use the campaign slug for identification and access.
- **Public Endpoint Changed:**
  - Public landing page access moved from `GET /api/lp/{slug}` to `GET /api/cp/{identifier}`.
  - The endpoint now accepts both campaign UUID and campaign slug for identification.
  - The endpoint was moved from `LandingpageController` to `CampaignController` to reflect the new flow.
- **URL Generation Updated:**
  - Campaign email URLs now use campaign slugs instead of landingpage slugs.
  - URLs follow the pattern: `/cp/{campaign-slug}` instead of `/lp/{landingpage-slug}`.
- **MongoDB Compatibility:**
  - Added graceful handling for existing campaigns without `landingpage_id` field using `getAttribute` override.
  - This ensures backward compatibility with existing data during the transition period.
- **Docs Updated:**
  - All documentation in `docs/src` has been updated to reflect these changes, including model properties, API request/response examples, and validation rules.

### Impact
- **Business Logic Improvement:** This change better reflects the actual business workflow where campaigns drive the marketing process and multiple campaigns can share landing page templates.
- **URL Structure:** Public URLs are now campaign-centric (`/cp/{campaign-slug}`) which provides better tracking and campaign-specific analytics.
- **Data Sharing:** Multiple campaigns can now efficiently share the same landing page content while maintaining separate campaign tracking and configuration.
- **API Consumer Updates Required:** All consumers of the API should update their integrations to:
  - Use campaign slugs for public landing page access
  - Update endpoint URLs from `/api/lp/` to `/api/cp/`
  - Handle the new relationship structure in API responses (landingpage has `campaigns` array, campaign has single `landingpage` object)

### Breaking Changes
- **Public Endpoint:** `/api/lp/{slug}` â†’ `/api/cp/{identifier}`
- **Model Relationships:** 
  - `Campaign.landingpage()` changed from `hasOne` to `belongsTo`
  - `Landingpage.campaign()` changed to `Landingpage.campaigns()` from `belongsTo` to `hasMany`
- **API Responses:**
  - `LandingpageResource` now returns `campaigns` array instead of single `campaign` object
  - `CampaignResource` now includes `slug` field
- **Validation Rules:**
  - `CampaignRequest` now includes `slug` and `landingpage_id` validation
  - `LandingpageRequest` removed `slug` and `campaign_id` validation

### Technical Details
- **Models Updated:** `Campaign.php`, `Landingpage.php`
- **Controllers Updated:** `CampaignController.php`, `LandingpageController.php`
- **Resources Updated:** `CampaignResource.php`, `LandingpageResource.php`
- **Factories Updated:** `CampaignFactory.php`, `LandingpageFactory.php`
- **Requests Updated:** `CampaignRequest.php`, `LandingpageRequest.php`
- **Services Updated:** `CampaignTrackingService.php`
- **Routes Updated:** `routes/api.php`

---

**See individual docs in `docs/src` for details on updated endpoints, models, and validation rules.**
